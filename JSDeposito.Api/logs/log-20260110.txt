2026-01-10 14:27:12.289 -03:00 [INF] Tentativa de login | Email: admin@jsdeposito.com
2026-01-10 14:27:12.978 -03:00 [INF] Login realizado com sucesso | UsuarioId: 1
2026-01-10 14:27:13.200 -03:00 [INF] Tokens gerados | UsuarioId: 1
2026-01-10 14:27:49.809 -03:00 [INF] Criando produto | Nome: Vodka Labrava | Preço: 95 | EstoqueInicial: 60
2026-01-10 14:27:49.906 -03:00 [INF] Produto criado | ProdutoId: 12
2026-01-10 14:27:53.604 -03:00 [INF] Listando produtos ativos
2026-01-10 14:27:53.643 -03:00 [INF] Listando produtos ativos
2026-01-10 14:30:36.787 -03:00 [INF] Listando produtos ativos
2026-01-10 14:30:36.796 -03:00 [INF] Listando produtos ativos
2026-01-10 14:33:47.418 -03:00 [INF] Listando produtos ativos
2026-01-10 14:34:56.417 -03:00 [INF] Listando produtos ativos
2026-01-10 14:34:56.426 -03:00 [INF] Listando produtos ativos
2026-01-10 14:35:05.409 -03:00 [INF] Listando produtos ativos
2026-01-10 14:35:05.418 -03:00 [INF] Listando produtos ativos
2026-01-10 14:36:14.481 -03:00 [INF] Listando produtos ativos
2026-01-10 14:36:14.492 -03:00 [INF] Listando produtos ativos
2026-01-10 14:39:45.048 -03:00 [INF] Listando produtos ativos
2026-01-10 14:39:45.060 -03:00 [INF] Listando produtos ativos
2026-01-10 14:41:34.101 -03:00 [INF] Listando produtos ativos
2026-01-10 14:41:34.127 -03:00 [INF] Listando produtos ativos
2026-01-10 14:44:28.419 -03:00 [INF] Listando produtos ativos
2026-01-10 14:44:28.427 -03:00 [INF] Listando produtos ativos
2026-01-10 14:44:56.443 -03:00 [INF] Listando produtos ativos
2026-01-10 14:44:56.455 -03:00 [INF] Listando produtos ativos
2026-01-10 14:47:38.336 -03:00 [INF] Criando pedido anônimo
2026-01-10 14:47:38.488 -03:00 [INF] Pedido anônimo criado | PedidoId: 1
2026-01-10 14:48:57.412 -03:00 [INF] Listando produtos ativos
2026-01-10 14:48:57.420 -03:00 [INF] Listando produtos ativos
2026-01-10 14:48:59.424 -03:00 [INF] Listando produtos ativos
2026-01-10 14:48:59.433 -03:00 [INF] Listando produtos ativos
2026-01-10 14:49:06.671 -03:00 [INF] Listando produtos ativos
2026-01-10 14:49:06.766 -03:00 [INF] Listando produtos ativos
2026-01-10 14:52:53.425 -03:00 [INF] Tentativa de login | Email: admin@jsdeposito.com
2026-01-10 14:52:54.211 -03:00 [INF] Login realizado com sucesso | UsuarioId: 1
2026-01-10 14:52:54.214 -03:00 [INF] Associando pedido anônimo ao usuário | UsuarioId: 1 | TokenAnonimo: "ec0e1537-6e8e-4b22-8d6b-59341b771bfb"
2026-01-10 14:52:54.477 -03:00 [INF] Tokens gerados | UsuarioId: 1
2026-01-10 14:53:24.656 -03:00 [INF] Listando produtos ativos
2026-01-10 14:53:24.817 -03:00 [INF] Listando produtos ativos
2026-01-10 14:55:00.431 -03:00 [INF] Listando produtos ativos
2026-01-10 14:55:00.444 -03:00 [INF] Listando produtos ativos
2026-01-10 14:55:04.762 -03:00 [INF] Listando produtos ativos
2026-01-10 14:55:04.866 -03:00 [INF] Listando produtos ativos
2026-01-10 14:56:08.866 -03:00 [INF] Criando pedido anônimo
2026-01-10 14:56:08.888 -03:00 [ERR] Erro não tratado | Path: /api/pedidos | Method: POST
System.Exception: Estoque insuficiente
   at JSDeposito.Core.Entities.Produto.SaidaEstoque(Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Produto.cs:line 63
   at JSDeposito.Core.Entities.Pedido.AdicionarItem(Produto produto, Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 46
   at JSDeposito.Core.Services.PedidoService.CriarPedidoAnonimo(CriarPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 48
   at JSDeposito.Api.Controllers.PedidoController.Criar(CriarPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 25
   at lambda_method238(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 14:56:08.939 -03:00 [ERR] Erro não tratado | Path: /api/pedidos | Method: POST
System.Exception: Estoque insuficiente
   at JSDeposito.Core.Entities.Produto.SaidaEstoque(Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Produto.cs:line 63
   at JSDeposito.Core.Entities.Pedido.AdicionarItem(Produto produto, Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 46
   at JSDeposito.Core.Services.PedidoService.CriarPedidoAnonimo(CriarPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 48
   at JSDeposito.Api.Controllers.PedidoController.Criar(CriarPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 25
   at lambda_method238(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 14:56:17.864 -03:00 [INF] Criando pedido anônimo
2026-01-10 14:56:17.871 -03:00 [ERR] Erro não tratado | Path: /api/pedidos | Method: POST
System.Exception: Estoque insuficiente
   at JSDeposito.Core.Entities.Produto.SaidaEstoque(Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Produto.cs:line 63
   at JSDeposito.Core.Entities.Pedido.AdicionarItem(Produto produto, Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 46
   at JSDeposito.Core.Services.PedidoService.CriarPedidoAnonimo(CriarPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 48
   at JSDeposito.Api.Controllers.PedidoController.Criar(CriarPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 25
   at lambda_method238(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 14:56:17.887 -03:00 [ERR] Erro não tratado | Path: /api/pedidos | Method: POST
System.Exception: Estoque insuficiente
   at JSDeposito.Core.Entities.Produto.SaidaEstoque(Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Produto.cs:line 63
   at JSDeposito.Core.Entities.Pedido.AdicionarItem(Produto produto, Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 46
   at JSDeposito.Core.Services.PedidoService.CriarPedidoAnonimo(CriarPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 48
   at JSDeposito.Api.Controllers.PedidoController.Criar(CriarPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 25
   at lambda_method238(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 14:56:34.328 -03:00 [INF] Criando pedido anônimo
2026-01-10 14:56:34.411 -03:00 [INF] Pedido anônimo criado | PedidoId: 2
2026-01-10 14:57:30.762 -03:00 [INF] Listando produtos ativos
2026-01-10 14:57:30.795 -03:00 [INF] Listando produtos ativos
2026-01-10 15:05:42.955 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:05:43.382 -03:00 [INF] Pedido anônimo criado | PedidoId: 3
2026-01-10 15:06:35.437 -03:00 [INF] Listando produtos ativos
2026-01-10 15:06:35.516 -03:00 [INF] Listando produtos ativos
2026-01-10 15:06:38.215 -03:00 [INF] Listando produtos ativos
2026-01-10 15:06:38.229 -03:00 [INF] Listando produtos ativos
2026-01-10 15:07:43.416 -03:00 [INF] Listando produtos ativos
2026-01-10 15:07:43.639 -03:00 [INF] Listando produtos ativos
2026-01-10 15:07:45.315 -03:00 [INF] Listando produtos ativos
2026-01-10 15:07:45.350 -03:00 [INF] Listando produtos ativos
2026-01-10 15:07:48.363 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:07:48.371 -03:00 [INF] Pedido anônimo criado | PedidoId: 4
2026-01-10 15:07:48.393 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 1
2026-01-10 15:07:48.494 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 1
2026-01-10 15:07:50.292 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 1
2026-01-10 15:07:50.305 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 1
2026-01-10 15:07:52.220 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 2
2026-01-10 15:07:52.229 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 2
2026-01-10 15:07:54.294 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 3
2026-01-10 15:07:54.303 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 3
2026-01-10 15:08:09.758 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 1
2026-01-10 15:08:09.767 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 1
2026-01-10 15:08:10.939 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 1
2026-01-10 15:08:10.949 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 1
2026-01-10 15:08:20.487 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 7
2026-01-10 15:08:20.497 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 7
2026-01-10 15:08:21.228 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 8
2026-01-10 15:08:21.237 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 8
2026-01-10 15:08:42.454 -03:00 [INF] Adicionando item | PedidoId: 4 | ProdutoId: 12
2026-01-10 15:08:42.462 -03:00 [INF] Item adicionado | PedidoId: 4 | ProdutoId: 12
2026-01-10 15:08:55.398 -03:00 [INF] Aplicando cupom desc10 no pedido 4
2026-01-10 15:08:55.422 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/4/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:08:55.486 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/4/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:10:22.095 -03:00 [WRN] Cancelando pedido | PedidoId: 4
2026-01-10 15:10:22.120 -03:00 [INF] Pedido cancelado com sucesso | PedidoId: 4
2026-01-10 15:10:28.937 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:10:28.943 -03:00 [INF] Pedido anônimo criado | PedidoId: 5
2026-01-10 15:10:28.953 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:28.962 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:29.371 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 2
2026-01-10 15:10:29.380 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 2
2026-01-10 15:10:29.812 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:29.821 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:30.603 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:30.611 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:52.815 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:52.824 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:54.740 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:54.748 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:55.731 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:55.739 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:56.483 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:56.491 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:56.651 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:56.659 -03:00 [INF] Item adicionado | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:56.804 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:56.807 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method272(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:10:56.817 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method272(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:10:56.947 -03:00 [INF] Adicionando item | PedidoId: 5 | ProdutoId: 1
2026-01-10 15:10:56.950 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method272(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:10:56.959 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method272(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:12:05.567 -03:00 [INF] Aplicando cupom desc10 no pedido 5
2026-01-10 15:12:05.570 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:12:05.581 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:12:14.846 -03:00 [INF] Aplicando cupom desc10 no pedido 5
2026-01-10 15:12:14.850 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:12:14.861 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:12:15.619 -03:00 [INF] Aplicando cupom desc10 no pedido 5
2026-01-10 15:12:15.622 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:12:15.633 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/5/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:13:39.428 -03:00 [INF] Listando produtos ativos
2026-01-10 15:13:39.437 -03:00 [INF] Listando produtos ativos
2026-01-10 15:13:51.371 -03:00 [INF] Listando produtos ativos
2026-01-10 15:13:51.379 -03:00 [INF] Listando produtos ativos
2026-01-10 15:14:03.317 -03:00 [INF] Listando produtos ativos
2026-01-10 15:14:03.326 -03:00 [INF] Listando produtos ativos
2026-01-10 15:14:09.565 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:14:09.573 -03:00 [INF] Pedido anônimo criado | PedidoId: 6
2026-01-10 15:14:27.695 -03:00 [INF] Adicionando item | PedidoId: 6 | ProdutoId: 2
2026-01-10 15:14:27.703 -03:00 [INF] Item adicionado | PedidoId: 6 | ProdutoId: 2
2026-01-10 15:14:28.667 -03:00 [INF] Adicionando item | PedidoId: 6 | ProdutoId: 3
2026-01-10 15:14:28.675 -03:00 [INF] Item adicionado | PedidoId: 6 | ProdutoId: 3
2026-01-10 15:14:29.748 -03:00 [INF] Adicionando item | PedidoId: 6 | ProdutoId: 5
2026-01-10 15:14:29.758 -03:00 [INF] Item adicionado | PedidoId: 6 | ProdutoId: 5
2026-01-10 15:14:30.059 -03:00 [INF] Adicionando item | PedidoId: 6 | ProdutoId: 6
2026-01-10 15:14:30.067 -03:00 [INF] Item adicionado | PedidoId: 6 | ProdutoId: 6
2026-01-10 15:14:30.580 -03:00 [INF] Adicionando item | PedidoId: 6 | ProdutoId: 9
2026-01-10 15:14:30.587 -03:00 [INF] Item adicionado | PedidoId: 6 | ProdutoId: 9
2026-01-10 15:14:30.891 -03:00 [INF] Adicionando item | PedidoId: 6 | ProdutoId: 8
2026-01-10 15:14:30.900 -03:00 [INF] Item adicionado | PedidoId: 6 | ProdutoId: 8
2026-01-10 15:14:32.635 -03:00 [INF] Adicionando item | PedidoId: 6 | ProdutoId: 8
2026-01-10 15:14:32.642 -03:00 [INF] Item adicionado | PedidoId: 6 | ProdutoId: 8
2026-01-10 15:14:32.863 -03:00 [INF] Adicionando item | PedidoId: 6 | ProdutoId: 8
2026-01-10 15:14:32.870 -03:00 [INF] Item adicionado | PedidoId: 6 | ProdutoId: 8
2026-01-10 15:15:23.367 -03:00 [INF] Aplicando cupom desc10 no pedido 6
2026-01-10 15:15:23.371 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/6/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:15:23.379 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/6/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:15:40.413 -03:00 [INF] Aplicando cupom desc10 no pedido 6
2026-01-10 15:15:40.416 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/6/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:15:40.457 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/6/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:19:40.850 -03:00 [INF] Aplicando cupom desc10 no pedido 6
2026-01-10 15:19:40.862 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/6/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:19:40.873 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/6/cupom | Method: POST
System.Exception: Cupom expirado
   at Cupom.Validar() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 40
   at Cupom.CalcularDesconto(Decimal totalPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 48
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 87
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 118
   at lambda_method290(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:20:32.970 -03:00 [INF] Tentativa de login | Email: admin@jsdeposito.com
2026-01-10 15:20:33.305 -03:00 [INF] Login realizado com sucesso | UsuarioId: 1
2026-01-10 15:20:33.306 -03:00 [INF] Associando pedido anônimo ao usuário | UsuarioId: 1 | TokenAnonimo: "495658a4-82af-40b0-aac9-38b659228d5b"
2026-01-10 15:20:33.394 -03:00 [INF] Tokens gerados | UsuarioId: 1
2026-01-10 15:20:59.695 -03:00 [ERR] Erro não tratado | Path: /api/cupons | Method: POST
System.Exception: Cupom deve ter valor OU percentual
   at Cupom..ctor(String codigo, Nullable`1 valorDesconto, Nullable`1 percentual, DateTime validoAte, Int32 limiteUso) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 23
   at JSDeposito.Api.Controllers.CupomController.Criar(CriarCupomRequestDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\CupomController.cs:line 29
   at lambda_method404(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:20:59.704 -03:00 [ERR] Erro não tratado | Path: /api/cupons | Method: POST
System.Exception: Cupom deve ter valor OU percentual
   at Cupom..ctor(String codigo, Nullable`1 valorDesconto, Nullable`1 percentual, DateTime validoAte, Int32 limiteUso) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Cupom.cs:line 23
   at JSDeposito.Api.Controllers.CupomController.Criar(CriarCupomRequestDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\CupomController.cs:line 29
   at lambda_method404(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:21:18.235 -03:00 [INF] Aplicando cupom desc20 no pedido 6
2026-01-10 15:21:18.248 -03:00 [INF] Aplicado cupom desc20 no pedido 6
2026-01-10 15:21:41.157 -03:00 [WRN] Cancelando pedido | PedidoId: 6
2026-01-10 15:21:41.187 -03:00 [INF] Pedido cancelado com sucesso | PedidoId: 6
2026-01-10 15:22:16.247 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:22:16.276 -03:00 [INF] Pedido anônimo criado | PedidoId: 7
2026-01-10 15:24:49.426 -03:00 [INF] Listando produtos ativos
2026-01-10 15:24:49.433 -03:00 [INF] Listando produtos ativos
2026-01-10 15:27:40.509 -03:00 [INF] Listando produtos ativos
2026-01-10 15:27:42.407 -03:00 [INF] Listando produtos ativos
2026-01-10 15:27:58.330 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:27:58.517 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:27:58.626 -03:00 [INF] Pedido anônimo criado | PedidoId: 9
2026-01-10 15:27:58.626 -03:00 [INF] Pedido anônimo criado | PedidoId: 8
2026-01-10 15:27:58.777 -03:00 [INF] Adicionando item | PedidoId: 9 | ProdutoId: 12
2026-01-10 15:27:58.804 -03:00 [INF] Item adicionado | PedidoId: 9 | ProdutoId: 12
2026-01-10 15:27:58.991 -03:00 [INF] Adicionando item | PedidoId: 9 | ProdutoId: 12
2026-01-10 15:27:59.003 -03:00 [INF] Item adicionado | PedidoId: 9 | ProdutoId: 12
2026-01-10 15:27:59.230 -03:00 [INF] Adicionando item | PedidoId: 9 | ProdutoId: 12
2026-01-10 15:27:59.245 -03:00 [INF] Item adicionado | PedidoId: 9 | ProdutoId: 12
2026-01-10 15:28:01.151 -03:00 [INF] Adicionando item | PedidoId: 9 | ProdutoId: 11
2026-01-10 15:28:01.169 -03:00 [INF] Item adicionado | PedidoId: 9 | ProdutoId: 11
2026-01-10 15:28:01.342 -03:00 [INF] Adicionando item | PedidoId: 9 | ProdutoId: 11
2026-01-10 15:28:01.351 -03:00 [INF] Item adicionado | PedidoId: 9 | ProdutoId: 11
2026-01-10 15:28:01.598 -03:00 [INF] Adicionando item | PedidoId: 9 | ProdutoId: 11
2026-01-10 15:28:01.613 -03:00 [INF] Item adicionado | PedidoId: 9 | ProdutoId: 11
2026-01-10 15:28:39.520 -03:00 [INF] Aplicando cupom desc20 no pedido 9
2026-01-10 15:28:39.565 -03:00 [INF] Aplicado cupom desc20 no pedido 9
2026-01-10 15:30:42.425 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:30:42.435 -03:00 [INF] Pedido anônimo criado | PedidoId: 10
2026-01-10 15:30:42.976 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 3
2026-01-10 15:30:42.989 -03:00 [INF] Item adicionado | PedidoId: 10 | ProdutoId: 3
2026-01-10 15:30:43.718 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 4
2026-01-10 15:30:43.728 -03:00 [INF] Item adicionado | PedidoId: 10 | ProdutoId: 4
2026-01-10 15:30:45.077 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:45.087 -03:00 [INF] Item adicionado | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:45.519 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 3
2026-01-10 15:30:45.533 -03:00 [INF] Item adicionado | PedidoId: 10 | ProdutoId: 3
2026-01-10 15:30:45.942 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 4
2026-01-10 15:30:45.948 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:46.036 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:48.721 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:48.737 -03:00 [INF] Item adicionado | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:49.061 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:49.066 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:49.076 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:49.285 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:49.289 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:49.298 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:52.942 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:52.946 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:52.967 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:53.518 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:53.522 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:53.531 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:55.384 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:55.389 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:55.414 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:55.846 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:55.850 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:55.861 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.061 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:56.066 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.110 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.244 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:56.248 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.257 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.422 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:56.432 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.444 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.596 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:56.600 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.609 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.781 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:56.805 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.814 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.957 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:56.963 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:56.974 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:57.126 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:57.130 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:57.140 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:57.292 -03:00 [INF] Adicionando item | PedidoId: 10 | ProdutoId: 2
2026-01-10 15:30:57.296 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:30:57.306 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/10/itens | Method: POST
JSDeposito.Core.Exceptions.BusinessException: Estoque atual: 0
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 120
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method308(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:33:07.433 -03:00 [INF] Listando produtos ativos
2026-01-10 15:33:07.440 -03:00 [INF] Listando produtos ativos
2026-01-10 15:33:26.737 -03:00 [INF] Listando produtos ativos
2026-01-10 15:33:26.991 -03:00 [INF] Listando produtos ativos
2026-01-10 15:33:28.220 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:33:28.273 -03:00 [INF] Pedido anônimo criado | PedidoId: 11
2026-01-10 15:33:28.327 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 2
2026-01-10 15:33:28.338 -03:00 [INF] Item adicionado | PedidoId: 11 | ProdutoId: 2
2026-01-10 15:33:30.847 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 2
2026-01-10 15:33:30.861 -03:00 [INF] Item adicionado | PedidoId: 11 | ProdutoId: 2
2026-01-10 15:33:31.279 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 2
2026-01-10 15:33:34.161 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 2
2026-01-10 15:33:35.718 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 2
2026-01-10 15:33:37.270 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:33:37.286 -03:00 [INF] Item adicionado | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:33:38.189 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:33:38.206 -03:00 [INF] Item adicionado | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:33:38.350 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:33:38.362 -03:00 [INF] Item adicionado | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:33:38.501 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:33:38.510 -03:00 [INF] Item adicionado | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:33:38.631 -03:00 [INF] Adicionando item | PedidoId: 11 | ProdutoId: 3
2026-01-10 15:34:58.010 -03:00 [INF] Aplicando cupom desc20 no pedido 11
2026-01-10 15:34:58.092 -03:00 [INF] Aplicado cupom desc20 no pedido 11
2026-01-10 15:37:48.564 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:37:48.573 -03:00 [INF] Pedido anônimo criado | PedidoId: 12
2026-01-10 15:37:48.585 -03:00 [INF] Adicionando item | PedidoId: 12 | ProdutoId: 2
2026-01-10 15:37:48.594 -03:00 [INF] Item adicionado | PedidoId: 12 | ProdutoId: 2
2026-01-10 15:37:50.891 -03:00 [INF] Adicionando item | PedidoId: 12 | ProdutoId: 3
2026-01-10 15:37:50.904 -03:00 [INF] Item adicionado | PedidoId: 12 | ProdutoId: 3
2026-01-10 15:37:52.094 -03:00 [INF] Adicionando item | PedidoId: 12 | ProdutoId: 4
2026-01-10 15:37:52.103 -03:00 [INF] Item adicionado | PedidoId: 12 | ProdutoId: 4
2026-01-10 15:37:53.006 -03:00 [INF] Adicionando item | PedidoId: 12 | ProdutoId: 5
2026-01-10 15:37:53.013 -03:00 [INF] Item adicionado | PedidoId: 12 | ProdutoId: 5
2026-01-10 15:38:05.081 -03:00 [INF] Adicionando item | PedidoId: 12 | ProdutoId: 2
2026-01-10 15:38:05.090 -03:00 [INF] Item adicionado | PedidoId: 12 | ProdutoId: 2
2026-01-10 15:38:14.367 -03:00 [INF] Aplicando cupom desc20 no pedido 12
2026-01-10 15:38:14.377 -03:00 [INF] Aplicado cupom desc20 no pedido 12
2026-01-10 15:38:32.162 -03:00 [INF] Aplicando cupom desc20 no pedido 12
2026-01-10 15:38:32.170 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:32.220 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:32.669 -03:00 [INF] Aplicando cupom desc20 no pedido 12
2026-01-10 15:38:32.673 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:32.685 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:32.845 -03:00 [INF] Aplicando cupom desc20 no pedido 12
2026-01-10 15:38:32.848 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:32.858 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:32.997 -03:00 [INF] Aplicando cupom desc20 no pedido 12
2026-01-10 15:38:33.001 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:33.011 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:33.150 -03:00 [INF] Aplicando cupom desc20 no pedido 12
2026-01-10 15:38:33.154 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:33.164 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:33.309 -03:00 [INF] Aplicando cupom desc20 no pedido 12
2026-01-10 15:38:33.312 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:33.322 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:40.510 -03:00 [INF] Aplicando cupom desc10 no pedido 12
2026-01-10 15:38:40.514 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:40.524 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/cupom | Method: POST
System.Exception: Pedido já possui cupom aplicado
   at JSDeposito.Core.Entities.Pedido.AplicarCupom(Cupom cupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 84
   at JSDeposito.Core.Services.PedidoService.AplicarCupom(Int32 pedidoId, String codigoCupom) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 259
   at JSDeposito.Api.Controllers.PedidoController.AplicarCupom(Int32 pedidoId, AplicarCupomDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 119
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:48.431 -03:00 [INF] Adicionando item | PedidoId: 12 | ProdutoId: 2
2026-01-10 15:38:51.510 -03:00 [INF] Adicionando item | PedidoId: 12 | ProdutoId: 3
2026-01-10 15:38:51.513 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/itens | Method: POST
System.Exception: Remova o cupom antes de alterar os itens
   at JSDeposito.Core.Entities.Pedido.GarantirItensEditaveis() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 168
   at JSDeposito.Core.Entities.Pedido.AdicionarItem(Produto produto, Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 44
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 129
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method288(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:38:51.524 -03:00 [ERR] Erro não tratado | Path: /api/pedidos/12/itens | Method: POST
System.Exception: Remova o cupom antes de alterar os itens
   at JSDeposito.Core.Entities.Pedido.GarantirItensEditaveis() in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 168
   at JSDeposito.Core.Entities.Pedido.AdicionarItem(Produto produto, Int32 quantidade) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Entities\Pedido.cs:line 44
   at JSDeposito.Core.Services.PedidoService.AdicionarItem(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\PedidoService.cs:line 129
   at JSDeposito.Api.Controllers.PedidoController.Adicionar(Int32 pedidoId, AdicionarItemPedidoDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\PedidoController.cs:line 68
   at lambda_method288(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 15:39:01.128 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:39:01.134 -03:00 [INF] Pedido anônimo criado | PedidoId: 13
2026-01-10 15:39:01.143 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 2
2026-01-10 15:39:01.151 -03:00 [INF] Item adicionado | PedidoId: 13 | ProdutoId: 2
2026-01-10 15:39:01.252 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 2
2026-01-10 15:39:01.261 -03:00 [INF] Item adicionado | PedidoId: 13 | ProdutoId: 2
2026-01-10 15:39:01.389 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 2
2026-01-10 15:39:03.357 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:03.366 -03:00 [INF] Item adicionado | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:03.493 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:03.501 -03:00 [INF] Item adicionado | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:03.621 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:03.631 -03:00 [INF] Item adicionado | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:03.741 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:03.749 -03:00 [INF] Item adicionado | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:04.253 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 3
2026-01-10 15:39:05.669 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 4
2026-01-10 15:39:05.677 -03:00 [INF] Item adicionado | PedidoId: 13 | ProdutoId: 4
2026-01-10 15:39:05.821 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 4
2026-01-10 15:39:12.568 -03:00 [INF] Aplicando cupom desc20 no pedido 13
2026-01-10 15:39:12.576 -03:00 [INF] Aplicado cupom desc20 no pedido 13
2026-01-10 15:39:17.062 -03:00 [INF] Adicionando item | PedidoId: 13 | ProdutoId: 2
2026-01-10 15:39:19.326 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:39:19.334 -03:00 [INF] Pedido anônimo criado | PedidoId: 14
2026-01-10 15:39:19.342 -03:00 [INF] Adicionando item | PedidoId: 14 | ProdutoId: 2
2026-01-10 15:39:19.350 -03:00 [INF] Item adicionado | PedidoId: 14 | ProdutoId: 2
2026-01-10 15:39:19.597 -03:00 [INF] Adicionando item | PedidoId: 14 | ProdutoId: 2
2026-01-10 15:39:19.608 -03:00 [INF] Item adicionado | PedidoId: 14 | ProdutoId: 2
2026-01-10 15:39:19.749 -03:00 [INF] Adicionando item | PedidoId: 14 | ProdutoId: 2
2026-01-10 15:39:24.440 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:39:24.447 -03:00 [INF] Pedido anônimo criado | PedidoId: 15
2026-01-10 15:39:24.460 -03:00 [INF] Adicionando item | PedidoId: 15 | ProdutoId: 3
2026-01-10 15:39:24.470 -03:00 [INF] Item adicionado | PedidoId: 15 | ProdutoId: 3
2026-01-10 15:39:24.557 -03:00 [INF] Adicionando item | PedidoId: 15 | ProdutoId: 3
2026-01-10 15:39:24.570 -03:00 [INF] Item adicionado | PedidoId: 15 | ProdutoId: 3
2026-01-10 15:39:24.687 -03:00 [INF] Adicionando item | PedidoId: 15 | ProdutoId: 3
2026-01-10 15:39:24.696 -03:00 [INF] Item adicionado | PedidoId: 15 | ProdutoId: 3
2026-01-10 15:39:24.805 -03:00 [INF] Adicionando item | PedidoId: 15 | ProdutoId: 3
2026-01-10 15:51:16.239 -03:00 [INF] Listando produtos ativos
2026-01-10 15:51:16.433 -03:00 [INF] Listando produtos ativos
2026-01-10 15:51:22.389 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:51:22.670 -03:00 [INF] Pedido anônimo criado | PedidoId: 16
2026-01-10 15:51:22.696 -03:00 [INF] Adicionando item | PedidoId: 16 | ProdutoId: 2
2026-01-10 15:51:22.799 -03:00 [INF] Item adicionado | PedidoId: 16 | ProdutoId: 2
2026-01-10 15:51:22.805 -03:00 [INF] Adicionando item | PedidoId: 16 | ProdutoId: 4
2026-01-10 15:51:22.819 -03:00 [INF] Item adicionado | PedidoId: 16 | ProdutoId: 4
2026-01-10 15:51:24.423 -03:00 [INF] Adicionando item | PedidoId: 16 | ProdutoId: 4
2026-01-10 15:51:27.127 -03:00 [INF] Adicionando item | PedidoId: 16 | ProdutoId: 2
2026-01-10 15:51:27.139 -03:00 [INF] Item adicionado | PedidoId: 16 | ProdutoId: 2
2026-01-10 15:51:27.760 -03:00 [INF] Adicionando item | PedidoId: 16 | ProdutoId: 2
2026-01-10 15:51:31.135 -03:00 [INF] Adicionando item | PedidoId: 16 | ProdutoId: 4
2026-01-10 15:53:06.237 -03:00 [INF] Listando produtos ativos
2026-01-10 15:53:06.252 -03:00 [INF] Listando produtos ativos
2026-01-10 15:53:07.177 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:53:07.187 -03:00 [INF] Pedido anônimo criado | PedidoId: 17
2026-01-10 15:53:07.198 -03:00 [INF] Adicionando item | PedidoId: 17 | ProdutoId: 7
2026-01-10 15:53:07.207 -03:00 [INF] Item adicionado | PedidoId: 17 | ProdutoId: 7
2026-01-10 15:53:20.049 -03:00 [INF] Listando produtos ativos
2026-01-10 15:53:20.096 -03:00 [INF] Listando produtos ativos
2026-01-10 15:53:21.476 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:53:21.486 -03:00 [INF] Pedido anônimo criado | PedidoId: 18
2026-01-10 15:53:21.506 -03:00 [INF] Adicionando item | PedidoId: 18 | ProdutoId: 5
2026-01-10 15:53:21.517 -03:00 [INF] Item adicionado | PedidoId: 18 | ProdutoId: 5
2026-01-10 15:55:13.525 -03:00 [INF] Listando produtos ativos
2026-01-10 15:55:13.548 -03:00 [INF] Listando produtos ativos
2026-01-10 15:56:45.951 -03:00 [INF] Listando produtos ativos
2026-01-10 15:56:45.967 -03:00 [INF] Listando produtos ativos
2026-01-10 15:56:52.132 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:56:52.141 -03:00 [INF] Pedido anônimo criado | PedidoId: 19
2026-01-10 15:56:52.163 -03:00 [INF] Adicionando item | PedidoId: 19 | ProdutoId: 6
2026-01-10 15:56:52.173 -03:00 [INF] Item adicionado | PedidoId: 19 | ProdutoId: 6
2026-01-10 15:57:06.165 -03:00 [INF] Listando produtos ativos
2026-01-10 15:57:06.173 -03:00 [INF] Listando produtos ativos
2026-01-10 15:57:09.011 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:57:09.023 -03:00 [INF] Pedido anônimo criado | PedidoId: 20
2026-01-10 15:57:09.039 -03:00 [INF] Adicionando item | PedidoId: 20 | ProdutoId: 7
2026-01-10 15:57:09.048 -03:00 [INF] Item adicionado | PedidoId: 20 | ProdutoId: 7
2026-01-10 15:58:29.421 -03:00 [INF] Listando produtos ativos
2026-01-10 15:58:29.427 -03:00 [INF] Listando produtos ativos
2026-01-10 15:58:47.009 -03:00 [INF] Listando produtos ativos
2026-01-10 15:58:47.021 -03:00 [INF] Listando produtos ativos
2026-01-10 15:58:49.123 -03:00 [INF] Criando pedido anônimo
2026-01-10 15:58:49.133 -03:00 [INF] Pedido anônimo criado | PedidoId: 21
2026-01-10 15:58:49.151 -03:00 [INF] Adicionando item | PedidoId: 21 | ProdutoId: 7
2026-01-10 15:58:49.163 -03:00 [INF] Item adicionado | PedidoId: 21 | ProdutoId: 7
2026-01-10 16:03:10.784 -03:00 [INF] Listando produtos ativos
2026-01-10 16:03:10.853 -03:00 [INF] Listando produtos ativos
2026-01-10 16:03:15.957 -03:00 [INF] Criando pedido anônimo
2026-01-10 16:03:15.975 -03:00 [INF] Pedido anônimo criado | PedidoId: 22
2026-01-10 16:03:15.985 -03:00 [INF] Adicionando item | PedidoId: 22 | ProdutoId: 7
2026-01-10 16:03:15.995 -03:00 [INF] Item adicionado | PedidoId: 22 | ProdutoId: 7
2026-01-10 16:03:47.682 -03:00 [INF] Listando produtos ativos
2026-01-10 16:03:47.695 -03:00 [INF] Listando produtos ativos
2026-01-10 16:03:49.853 -03:00 [INF] Criando pedido anônimo
2026-01-10 16:03:49.869 -03:00 [INF] Pedido anônimo criado | PedidoId: 23
2026-01-10 16:03:49.880 -03:00 [INF] Adicionando item | PedidoId: 23 | ProdutoId: 7
2026-01-10 16:03:49.888 -03:00 [INF] Item adicionado | PedidoId: 23 | ProdutoId: 7
2026-01-10 16:04:55.741 -03:00 [INF] Listando produtos ativos
2026-01-10 16:04:55.781 -03:00 [INF] Listando produtos ativos
2026-01-10 16:04:59.787 -03:00 [INF] Criando pedido anônimo
2026-01-10 16:04:59.798 -03:00 [INF] Pedido anônimo criado | PedidoId: 24
2026-01-10 16:04:59.813 -03:00 [INF] Adicionando item | PedidoId: 24 | ProdutoId: 7
2026-01-10 16:04:59.825 -03:00 [INF] Item adicionado | PedidoId: 24 | ProdutoId: 7
2026-01-10 16:06:52.896 -03:00 [INF] Listando produtos ativos
2026-01-10 16:06:52.928 -03:00 [INF] Listando produtos ativos
2026-01-10 16:06:54.012 -03:00 [INF] Criando pedido anônimo
2026-01-10 16:06:54.022 -03:00 [INF] Pedido anônimo criado | PedidoId: 25
2026-01-10 16:06:54.038 -03:00 [INF] Adicionando item | PedidoId: 25 | ProdutoId: 7
2026-01-10 16:06:54.049 -03:00 [INF] Item adicionado | PedidoId: 25 | ProdutoId: 7
2026-01-10 16:07:53.731 -03:00 [INF] Listando produtos ativos
2026-01-10 16:07:53.738 -03:00 [INF] Listando produtos ativos
2026-01-10 16:07:56.227 -03:00 [INF] Criando pedido anônimo
2026-01-10 16:07:56.237 -03:00 [INF] Pedido anônimo criado | PedidoId: 26
2026-01-10 16:07:56.248 -03:00 [INF] Adicionando item | PedidoId: 26 | ProdutoId: 7
2026-01-10 16:07:56.257 -03:00 [INF] Item adicionado | PedidoId: 26 | ProdutoId: 7
2026-01-10 16:12:36.238 -03:00 [INF] Listando produtos ativos
2026-01-10 16:12:36.245 -03:00 [INF] Listando produtos ativos
2026-01-10 16:12:40.643 -03:00 [INF] Criando pedido anônimo
2026-01-10 16:12:40.649 -03:00 [INF] Pedido anônimo criado | PedidoId: 27
2026-01-10 16:12:40.657 -03:00 [INF] Adicionando item | PedidoId: 27 | ProdutoId: 5
2026-01-10 16:12:40.663 -03:00 [INF] Item adicionado | PedidoId: 27 | ProdutoId: 5
2026-01-10 16:12:40.960 -03:00 [INF] Adicionando item | PedidoId: 27 | ProdutoId: 6
2026-01-10 16:12:40.968 -03:00 [INF] Item adicionado | PedidoId: 27 | ProdutoId: 6
2026-01-10 16:12:47.154 -03:00 [INF] Criando pedido anônimo
2026-01-10 16:12:47.164 -03:00 [INF] Pedido anônimo criado | PedidoId: 28
2026-01-10 16:12:47.174 -03:00 [INF] Adicionando item | PedidoId: 28 | ProdutoId: 5
2026-01-10 16:12:47.182 -03:00 [INF] Item adicionado | PedidoId: 28 | ProdutoId: 5
2026-01-10 16:12:47.400 -03:00 [INF] Adicionando item | PedidoId: 28 | ProdutoId: 6
2026-01-10 16:12:47.408 -03:00 [INF] Item adicionado | PedidoId: 28 | ProdutoId: 6
2026-01-10 17:59:53.066 -03:00 [INF] Tentativa de login | Email: admin@jsdeposito.com
2026-01-10 17:59:53.432 -03:00 [INF] Login realizado com sucesso | UsuarioId: 1
2026-01-10 17:59:53.528 -03:00 [INF] Tokens gerados | UsuarioId: 1
2026-01-10 18:04:09.860 -03:00 [INF] Listando produtos ativos
2026-01-10 18:04:09.875 -03:00 [INF] Listando produtos ativos
2026-01-10 18:04:20.406 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:04:20.412 -03:00 [INF] Pedido anônimo criado | PedidoId: 29
2026-01-10 18:04:20.421 -03:00 [INF] Adicionando item | PedidoId: 29 | ProdutoId: 6
2026-01-10 18:04:20.429 -03:00 [INF] Item adicionado | PedidoId: 29 | ProdutoId: 6
2026-01-10 18:10:39.881 -03:00 [INF] Tentativa de login | Email: cliente@jsdeposito.com
2026-01-10 18:10:40.049 -03:00 [INF] Login realizado com sucesso | UsuarioId: 2
2026-01-10 18:10:40.054 -03:00 [INF] Tokens gerados | UsuarioId: 2
2026-01-10 18:10:40.100 -03:00 [INF] Listando produtos ativos
2026-01-10 18:10:40.110 -03:00 [INF] Listando produtos ativos
2026-01-10 18:10:51.054 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:10:51.066 -03:00 [INF] Pedido anônimo criado | PedidoId: 30
2026-01-10 18:10:51.086 -03:00 [INF] Adicionando item | PedidoId: 30 | ProdutoId: 6
2026-01-10 18:10:51.097 -03:00 [INF] Item adicionado | PedidoId: 30 | ProdutoId: 6
2026-01-10 18:10:51.460 -03:00 [INF] Adicionando item | PedidoId: 30 | ProdutoId: 7
2026-01-10 18:10:51.471 -03:00 [INF] Item adicionado | PedidoId: 30 | ProdutoId: 7
2026-01-10 18:15:19.676 -03:00 [INF] Listando produtos ativos
2026-01-10 18:15:19.693 -03:00 [INF] Listando produtos ativos
2026-01-10 18:15:26.749 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:15:26.761 -03:00 [INF] Pedido anônimo criado | PedidoId: 31
2026-01-10 18:15:26.782 -03:00 [INF] Adicionando item | PedidoId: 31 | ProdutoId: 7
2026-01-10 18:15:26.793 -03:00 [INF] Item adicionado | PedidoId: 31 | ProdutoId: 7
2026-01-10 18:15:38.059 -03:00 [INF] Tentativa de login | Email: cliente@jsdeposito.com
2026-01-10 18:15:38.212 -03:00 [INF] Login realizado com sucesso | UsuarioId: 2
2026-01-10 18:15:38.217 -03:00 [INF] Tokens gerados | UsuarioId: 2
2026-01-10 18:15:38.258 -03:00 [INF] Listando produtos ativos
2026-01-10 18:15:38.268 -03:00 [INF] Listando produtos ativos
2026-01-10 18:18:42.700 -03:00 [INF] Tentativa de login | Email: cliente@jsdeposito.com
2026-01-10 18:18:42.858 -03:00 [INF] Login realizado com sucesso | UsuarioId: 2
2026-01-10 18:18:42.864 -03:00 [INF] Tokens gerados | UsuarioId: 2
2026-01-10 18:18:42.906 -03:00 [INF] Listando produtos ativos
2026-01-10 18:18:42.917 -03:00 [INF] Listando produtos ativos
2026-01-10 18:20:11.483 -03:00 [INF] Listando produtos ativos
2026-01-10 18:20:11.505 -03:00 [INF] Listando produtos ativos
2026-01-10 18:20:50.122 -03:00 [INF] Listando produtos ativos
2026-01-10 18:20:50.142 -03:00 [INF] Listando produtos ativos
2026-01-10 18:21:11.199 -03:00 [INF] Tentativa de login | Email: cliente@jsdeposito.com
2026-01-10 18:21:11.357 -03:00 [INF] Login realizado com sucesso | UsuarioId: 2
2026-01-10 18:21:11.362 -03:00 [INF] Tokens gerados | UsuarioId: 2
2026-01-10 18:21:11.392 -03:00 [INF] Listando produtos ativos
2026-01-10 18:21:11.399 -03:00 [INF] Listando produtos ativos
2026-01-10 18:21:17.574 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:21:17.579 -03:00 [INF] Pedido anônimo criado | PedidoId: 32
2026-01-10 18:21:17.589 -03:00 [INF] Adicionando item | PedidoId: 32 | ProdutoId: 7
2026-01-10 18:21:17.596 -03:00 [INF] Item adicionado | PedidoId: 32 | ProdutoId: 7
2026-01-10 18:21:17.963 -03:00 [INF] Adicionando item | PedidoId: 32 | ProdutoId: 8
2026-01-10 18:21:17.971 -03:00 [INF] Item adicionado | PedidoId: 32 | ProdutoId: 8
2026-01-10 18:21:18.756 -03:00 [INF] Adicionando item | PedidoId: 32 | ProdutoId: 6
2026-01-10 18:21:18.764 -03:00 [INF] Item adicionado | PedidoId: 32 | ProdutoId: 6
2026-01-10 18:21:24.419 -03:00 [INF] Aplicando cupom desc20 no pedido 32
2026-01-10 18:21:24.454 -03:00 [INF] Aplicado cupom desc20 no pedido 32
2026-01-10 18:21:37.430 -03:00 [INF] Tentativa de login | Email: cliente@jsdeposito.com
2026-01-10 18:21:37.584 -03:00 [WRN] Falha de login (senha inválida) | Email: cliente@jsdeposito.com
2026-01-10 18:21:37.588 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 57
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:21:37.650 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 57
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:21:44.712 -03:00 [INF] Tentativa de login | Email: cliente@jdeposito.com
2026-01-10 18:21:44.722 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 48
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:21:44.730 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 48
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:21:45.316 -03:00 [INF] Tentativa de login | Email: cliente@jdeposito.com
2026-01-10 18:21:45.318 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 48
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:21:45.325 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 48
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:21:50.205 -03:00 [INF] Tentativa de login | Email: cliente@jsdeposito.co
2026-01-10 18:21:50.207 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 48
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:21:50.215 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 48
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:24:38.929 -03:00 [INF] Tentativa de registro | Email: leandro@gmail.com
2026-01-10 18:24:39.103 -03:00 [INF] Usuário registrado com sucesso | UsuarioId: 3
2026-01-10 18:25:43.594 -03:00 [INF] Tentativa de registro | Email: leandro1@gmail.com
2026-01-10 18:25:43.753 -03:00 [INF] Usuário registrado com sucesso | UsuarioId: 4
2026-01-10 18:25:55.733 -03:00 [INF] Tentativa de login | Email: leandro1@gmail.com
2026-01-10 18:25:55.889 -03:00 [INF] Login realizado com sucesso | UsuarioId: 4
2026-01-10 18:25:55.893 -03:00 [INF] Tokens gerados | UsuarioId: 4
2026-01-10 18:25:55.919 -03:00 [INF] Listando produtos ativos
2026-01-10 18:25:55.928 -03:00 [INF] Listando produtos ativos
2026-01-10 18:27:49.004 -03:00 [INF] Listando produtos ativos
2026-01-10 18:27:49.018 -03:00 [INF] Listando produtos ativos
2026-01-10 18:28:13.472 -03:00 [INF] Tentativa de registro | Email: anne@gmail.com
2026-01-10 18:28:13.630 -03:00 [INF] Usuário registrado com sucesso | UsuarioId: 5
2026-01-10 18:28:33.590 -03:00 [INF] Tentativa de registro | Email: anne@gmail.com
2026-01-10 18:28:33.593 -03:00 [WRN] Registro bloqueado — e-mail já existente | Email: anne@gmail.com
2026-01-10 18:28:33.594 -03:00 [ERR] Erro não tratado | Path: /api/auth/register | Method: POST
System.Exception: E-mail já cadastrado
   at JSDeposito.Core.Services.AuthService.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 185
   at JSDeposito.Api.Controllers.AuthController.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 24
   at lambda_method433(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:28:33.602 -03:00 [ERR] Erro não tratado | Path: /api/auth/register | Method: POST
System.Exception: E-mail já cadastrado
   at JSDeposito.Core.Services.AuthService.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 185
   at JSDeposito.Api.Controllers.AuthController.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 24
   at lambda_method433(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:28:37.444 -03:00 [INF] Tentativa de registro | Email: anne@gmail.com
2026-01-10 18:28:37.446 -03:00 [WRN] Registro bloqueado — e-mail já existente | Email: anne@gmail.com
2026-01-10 18:28:37.447 -03:00 [ERR] Erro não tratado | Path: /api/auth/register | Method: POST
System.Exception: E-mail já cadastrado
   at JSDeposito.Core.Services.AuthService.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 185
   at JSDeposito.Api.Controllers.AuthController.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 24
   at lambda_method433(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:28:37.455 -03:00 [ERR] Erro não tratado | Path: /api/auth/register | Method: POST
System.Exception: E-mail já cadastrado
   at JSDeposito.Core.Services.AuthService.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 185
   at JSDeposito.Api.Controllers.AuthController.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 24
   at lambda_method433(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:28:39.589 -03:00 [INF] Tentativa de registro | Email: anne@gmail.com
2026-01-10 18:28:39.591 -03:00 [WRN] Registro bloqueado — e-mail já existente | Email: anne@gmail.com
2026-01-10 18:28:39.592 -03:00 [ERR] Erro não tratado | Path: /api/auth/register | Method: POST
System.Exception: E-mail já cadastrado
   at JSDeposito.Core.Services.AuthService.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 185
   at JSDeposito.Api.Controllers.AuthController.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 24
   at lambda_method433(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:28:39.601 -03:00 [ERR] Erro não tratado | Path: /api/auth/register | Method: POST
System.Exception: E-mail já cadastrado
   at JSDeposito.Core.Services.AuthService.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 185
   at JSDeposito.Api.Controllers.AuthController.Register(RegisterRequest request) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 24
   at lambda_method433(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:28:50.710 -03:00 [INF] Tentativa de login | Email: anne@gmail.com
2026-01-10 18:28:50.869 -03:00 [INF] Login realizado com sucesso | UsuarioId: 5
2026-01-10 18:28:50.873 -03:00 [INF] Tokens gerados | UsuarioId: 5
2026-01-10 18:28:50.903 -03:00 [INF] Listando produtos ativos
2026-01-10 18:28:50.909 -03:00 [INF] Listando produtos ativos
2026-01-10 18:30:36.476 -03:00 [INF] Listando produtos ativos
2026-01-10 18:30:36.489 -03:00 [INF] Listando produtos ativos
2026-01-10 18:31:38.423 -03:00 [INF] Tentativa de login | Email: anne@gmail.co
2026-01-10 18:31:38.426 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 48
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:31:38.434 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 48
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:31:42.462 -03:00 [INF] Tentativa de login | Email: anne@gmail.com
2026-01-10 18:31:42.623 -03:00 [WRN] Falha de login (senha inválida) | Email: anne@gmail.com
2026-01-10 18:31:42.624 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 57
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:31:42.633 -03:00 [ERR] Erro não tratado | Path: /api/auth/login | Method: POST
System.Exception: Credenciais inválidas
   at JSDeposito.Core.Services.AuthService.Login(String email, String senha, Nullable`1 tokenAnonimoPedido) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Core\Services\AuthService.cs:line 57
   at JSDeposito.Api.Controllers.AuthController.Login(LoginDto dto) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Controllers\AuthController.cs:line 38
   at lambda_method292(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at JSDeposito.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\Desenvolvimento\C#\JSDeposito\JSDeposito.Api\Middlewares\GlobalExceptionMiddleware.cs:line 25
2026-01-10 18:31:43.885 -03:00 [INF] Tentativa de login | Email: anne@gmail.com
2026-01-10 18:31:44.038 -03:00 [INF] Login realizado com sucesso | UsuarioId: 5
2026-01-10 18:31:44.042 -03:00 [INF] Tokens gerados | UsuarioId: 5
2026-01-10 18:31:44.075 -03:00 [INF] Listando produtos ativos
2026-01-10 18:31:44.083 -03:00 [INF] Listando produtos ativos
2026-01-10 18:32:28.496 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:32:28.502 -03:00 [INF] Pedido anônimo criado | PedidoId: 33
2026-01-10 18:32:28.511 -03:00 [INF] Adicionando item | PedidoId: 33 | ProdutoId: 8
2026-01-10 18:32:28.517 -03:00 [INF] Item adicionado | PedidoId: 33 | ProdutoId: 8
2026-01-10 18:34:05.300 -03:00 [INF] Listando produtos ativos
2026-01-10 18:34:05.313 -03:00 [INF] Listando produtos ativos
2026-01-10 18:34:09.142 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:34:09.150 -03:00 [INF] Pedido anônimo criado | PedidoId: 34
2026-01-10 18:34:09.157 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 6
2026-01-10 18:34:09.164 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 6
2026-01-10 18:34:43.375 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:43.383 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:44.677 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 6
2026-01-10 18:34:44.684 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 6
2026-01-10 18:34:45.772 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:45.781 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.004 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.013 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.197 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.203 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.371 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.379 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.556 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.564 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.724 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.732 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.893 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:46.900 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:47.077 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:47.083 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:47.245 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:47.252 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:50.237 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:50.246 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:50.508 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:50.516 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:50.733 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:34:50.739 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 5
2026-01-10 18:35:22.686 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 7
2026-01-10 18:35:22.720 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 7
2026-01-10 18:35:25.173 -03:00 [INF] Adicionando item | PedidoId: 34 | ProdutoId: 6
2026-01-10 18:35:25.181 -03:00 [INF] Item adicionado | PedidoId: 34 | ProdutoId: 6
2026-01-10 18:35:30.743 -03:00 [INF] Aplicando cupom desc20 no pedido 34
2026-01-10 18:35:30.750 -03:00 [INF] Aplicado cupom desc20 no pedido 34
2026-01-10 18:35:49.993 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:35:50.030 -03:00 [INF] Pedido anônimo criado | PedidoId: 35
2026-01-10 18:35:50.040 -03:00 [INF] Adicionando item | PedidoId: 35 | ProdutoId: 8
2026-01-10 18:35:50.046 -03:00 [INF] Item adicionado | PedidoId: 35 | ProdutoId: 8
2026-01-10 18:38:13.591 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:38:13.597 -03:00 [INF] Pedido anônimo criado | PedidoId: 36
2026-01-10 18:38:13.608 -03:00 [INF] Adicionando item | PedidoId: 36 | ProdutoId: 5
2026-01-10 18:38:13.614 -03:00 [INF] Item adicionado | PedidoId: 36 | ProdutoId: 5
2026-01-10 18:38:24.894 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:38:24.900 -03:00 [INF] Pedido anônimo criado | PedidoId: 37
2026-01-10 18:38:24.911 -03:00 [INF] Adicionando item | PedidoId: 37 | ProdutoId: 5
2026-01-10 18:38:24.917 -03:00 [INF] Item adicionado | PedidoId: 37 | ProdutoId: 5
2026-01-10 18:38:26.205 -03:00 [INF] Adicionando item | PedidoId: 37 | ProdutoId: 5
2026-01-10 18:38:26.212 -03:00 [INF] Item adicionado | PedidoId: 37 | ProdutoId: 5
2026-01-10 18:38:27.158 -03:00 [INF] Adicionando item | PedidoId: 37 | ProdutoId: 5
2026-01-10 18:38:27.164 -03:00 [INF] Item adicionado | PedidoId: 37 | ProdutoId: 5
2026-01-10 18:38:29.452 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:38:29.459 -03:00 [INF] Pedido anônimo criado | PedidoId: 38
2026-01-10 18:38:29.466 -03:00 [INF] Adicionando item | PedidoId: 38 | ProdutoId: 6
2026-01-10 18:38:29.472 -03:00 [INF] Item adicionado | PedidoId: 38 | ProdutoId: 6
2026-01-10 18:38:32.341 -03:00 [INF] Adicionando item | PedidoId: 38 | ProdutoId: 7
2026-01-10 18:38:32.349 -03:00 [INF] Item adicionado | PedidoId: 38 | ProdutoId: 7
2026-01-10 18:38:34.447 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:38:34.453 -03:00 [INF] Pedido anônimo criado | PedidoId: 39
2026-01-10 18:38:34.461 -03:00 [INF] Adicionando item | PedidoId: 39 | ProdutoId: 8
2026-01-10 18:38:34.467 -03:00 [INF] Item adicionado | PedidoId: 39 | ProdutoId: 8
2026-01-10 18:38:37.540 -03:00 [INF] Criando pedido anônimo
2026-01-10 18:38:37.547 -03:00 [INF] Pedido anônimo criado | PedidoId: 40
2026-01-10 18:38:37.554 -03:00 [INF] Adicionando item | PedidoId: 40 | ProdutoId: 12
2026-01-10 18:38:37.561 -03:00 [INF] Item adicionado | PedidoId: 40 | ProdutoId: 12
2026-01-10 18:40:50.496 -03:00 [INF] Listando produtos ativos
2026-01-10 18:40:50.502 -03:00 [INF] Listando produtos ativos
2026-01-10 18:40:51.522 -03:00 [INF] Listando produtos ativos
2026-01-10 18:40:51.532 -03:00 [INF] Listando produtos ativos
2026-01-10 18:40:52.381 -03:00 [INF] Listando produtos ativos
2026-01-10 18:40:52.399 -03:00 [INF] Listando produtos ativos
2026-01-10 18:45:31.388 -03:00 [INF] Listando produtos ativos
2026-01-10 18:45:31.407 -03:00 [INF] Listando produtos ativos
2026-01-10 18:46:38.420 -03:00 [INF] Listando produtos ativos
2026-01-10 18:46:38.427 -03:00 [INF] Listando produtos ativos
2026-01-10 18:46:41.737 -03:00 [INF] Listando produtos ativos
2026-01-10 18:46:41.744 -03:00 [INF] Listando produtos ativos
2026-01-10 18:46:57.925 -03:00 [INF] Listando produtos ativos
2026-01-10 18:46:57.933 -03:00 [INF] Listando produtos ativos
2026-01-10 18:47:25.890 -03:00 [INF] Listando produtos ativos
2026-01-10 18:47:25.914 -03:00 [INF] Listando produtos ativos
2026-01-10 18:48:53.450 -03:00 [INF] Listando produtos ativos
2026-01-10 18:48:53.464 -03:00 [INF] Listando produtos ativos
2026-01-10 18:52:38.918 -03:00 [INF] Listando produtos ativos
2026-01-10 18:52:38.929 -03:00 [INF] Listando produtos ativos
2026-01-10 22:10:15.643 -03:00 [INF] Listando produtos ativos
2026-01-10 22:10:15.724 -03:00 [INF] Listando produtos ativos
2026-01-10 22:10:31.181 -03:00 [INF] Listando produtos ativos
2026-01-10 22:10:31.188 -03:00 [INF] Listando produtos ativos
2026-01-10 22:15:33.228 -03:00 [INF] Listando produtos ativos
2026-01-10 22:15:33.393 -03:00 [INF] Listando produtos ativos
2026-01-10 22:16:46.717 -03:00 [INF] Listando produtos ativos
2026-01-10 22:16:46.731 -03:00 [INF] Listando produtos ativos
2026-01-10 22:19:42.807 -03:00 [INF] Listando produtos ativos
2026-01-10 22:19:42.820 -03:00 [INF] Listando produtos ativos
2026-01-10 22:20:54.785 -03:00 [INF] Listando produtos ativos
2026-01-10 22:20:54.793 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:01.323 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:01.340 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:02.428 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:02.443 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:11.316 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:11.343 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:12.149 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:12.164 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:19.301 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:19.316 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:20.123 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:20.136 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:20.308 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:20.318 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:20.486 -03:00 [INF] Listando produtos ativos
2026-01-10 22:21:20.503 -03:00 [INF] Listando produtos ativos
2026-01-10 22:22:10.041 -03:00 [INF] Listando produtos ativos
2026-01-10 22:22:10.052 -03:00 [INF] Listando produtos ativos
2026-01-10 22:24:01.463 -03:00 [INF] Listando produtos ativos
2026-01-10 22:24:01.497 -03:00 [INF] Listando produtos ativos
2026-01-10 22:30:40.388 -03:00 [INF] Listando produtos ativos
2026-01-10 22:30:40.412 -03:00 [INF] Listando produtos ativos
